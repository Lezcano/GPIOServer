#!/dev/null
########################################################################################################################
########################################################################################################################
##
##      Copyright (C) 2020 Peter Walsh, Milford, NH 03055
##      All Rights Reserved under the MIT license as outlined below.
##
##  FILE
##
##      etc/GPIO.conf
##
##  DESCRIPTION
##
##      Messaging functions (status and error reporting to console) for applications
##
##  DATA
##
##      #
##      # Comment
##      #
##      AllowAdd no                 # When yes, config allows user to add to this file
##
##      GPIO    7
##          Mode=Input              # One of:   Input   Output
##          Logic=Invert            #           Invert  Normal
##          Pull=High               #           High    Low
##          Name="Keurig"
##          Comment="Coffee maker in the kitchen"
##
########################################################################################################################
########################################################################################################################
##
##  MIT LICENSE
##
##  Permission is hereby granted, free of charge, to any person obtaining a copy of
##    this software and associated documentation files (the "Software"), to deal in
##    the Software without restriction, including without limitation the rights to
##    use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
##    of the Software, and to permit persons to whom the Software is furnished to do
##    so, subject to the following conditions:
##
##  The above copyright notice and this permission notice shall be included in
##    all copies or substantial portions of the Software.
##
##  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
##    INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
##    PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
##    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
##    OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
##    SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
##
########################################################################################################################
########################################################################################################################
#
# This is a description of RasPi GPIO peripherals, used by the ConfigServer software.
#
# The format is similar to /etc/dhdpcd.conf, where individual GPIO descriptions are held
#   within section blocks (in the manner of a network interface), and global variables
#   can be set outside of the GPIO blocks. Currently, the only global var is "AllowAdd"
#
# Lines beginning with a pound sign are comments. Keywords are case insensitive, values
#   are lower case or camel case or upper case (ex: "off" or "Off" or "OFF")
#
# Spaces are allowed between lexical constructs; ie - spaces/tabs before or after the "="
#   are ignored, spaces/tabs at the beginning of a line are ignored.
#
# The following are true:
#
#       0    means GND potential
#       Low  means GND potential
#       1    means Vcc potential, which is 3.3V for RasPi
#       High means Vcc potential, which is 3.3V for RasPi
#
#       If Mode=Normal:
#           OFF     means 0, Low , and GND
#           ON      means 1, High, and Vcc
#
#       If Mode=Invert:
#           ON      means 0, Low , and GND
#           OFF     means 1, High, and Vcc
#
# The server allows the user to set output GPIOs "on" or "off". The configuration settings
#   in this file determine whether "on" means low, or "on" means high.
#
# The double quotes around "Name" and "Comment" are required.
#
# Example:
#
#      #
#      # Comment
#      #
#      AllowAdd no                 # Don't allow GPIO additions to this file
#
#      GPIO    7
#          Mode=Input              # One of:   Input   Output   [REQUIRED]
#          Logic=Invert            #           Invert  Normal   [DEFAULT: Normal]
#          Pull=High               #           High    Low
#          Boot=Off                #           On      Off      [Default: Off]
#          Name="Keurig"
#          Comment="Coffee maker in the kitchen"
#
# Notes:
#
#       "Pull"      is only for inputs, ignored for outputs
#       "Logic"     if missing, defaults to "Normal"
#       "Boot"      is the default state of output GPIOs at system boot. Note that the
#                     boot state will probably be High-Z until the system boot process
#                     completes.
#
########################################################################################################################

########################################################################################################################
#
# AllowAdd Yes:  Allow the config section to add extra GPIO definitions to the end
# AllowAdd No:   The definitions found here can be changed, but no new ones added
#
# This is used, for example, with PiHat add-on boards that have a fixed number of relays
#   at specific GPIO locations, where the user may want to change the name or logic, but
#   not add more relays or change the GPIO numbers.
#
AllowAdd No

########################################################################################################################
#
# GPIO definitions.
#
# NOTE: The system uses the WiringPi numbering scheme for GPIOs!!!
#
# The following table outlines the COMPLETELY FRUSTRATING numbering schemes used on
#   the RasPi. Use the wPi column numbering for the GPIO numbers described here.
#
#  +-----+-----+---------+------+---+---Pi 4B--+---+------+---------+-----+-----+
#  | BCM | wPi |   Name  | Mode | V | Physical | V | Mode | Name    | wPi | BCM |
#  +-----+-----+---------+------+---+----++----+---+------+---------+-----+-----+
#  |     |     |    3.3v |      |   |  1 || 2  |   |      | 5v      |     |     |
#  |   2 |   8 |   SDA.1 |   IN | 1 |  3 || 4  |   |      | 5v      |     |     |
#  |   3 |   9 |   SCL.1 |   IN | 1 |  5 || 6  |   |      | 0v      |     |     |
#  |   4 |   7 | GPIO. 7 |   IN | 1 |  7 || 8  | 1 | IN   | TxD     | 15  | 14  |
#  |     |     |      0v |      |   |  9 || 10 | 1 | IN   | RxD     | 16  | 15  |
#  |  17 |   0 | GPIO. 0 |  OUT | 0 | 11 || 12 | 0 | IN   | GPIO. 1 | 1   | 18  |
#  |  27 |   2 | GPIO. 2 |   IN | 0 | 13 || 14 |   |      | 0v      |     |     |
#  |  22 |   3 | GPIO. 3 |   IN | 0 | 15 || 16 | 0 | IN   | GPIO. 4 | 4   | 23  |
#  |     |     |    3.3v |      |   | 17 || 18 | 0 | IN   | GPIO. 5 | 5   | 24  |
#  |  10 |  12 |    MOSI |   IN | 0 | 19 || 20 |   |      | 0v      |     |     |
#  |   9 |  13 |    MISO |   IN | 0 | 21 || 22 | 0 | IN   | GPIO. 6 | 6   | 25  |
#  |  11 |  14 |    SCLK |   IN | 0 | 23 || 24 | 1 | IN   | CE0     | 10  | 8   |
#  |     |     |      0v |      |   | 25 || 26 | 1 | IN   | CE1     | 11  | 7   |
#  |   0 |  30 |   SDA.0 |   IN | 1 | 27 || 28 | 1 | IN   | SCL.0   | 31  | 1   |
#  |   5 |  21 | GPIO.21 |   IN | 1 | 29 || 30 |   |      | 0v      |     |     |
#  |   6 |  22 | GPIO.22 |   IN | 1 | 31 || 32 | 0 | IN   | GPIO.26 | 26  | 12  |
#  |  13 |  23 | GPIO.23 |   IN | 0 | 33 || 34 |   |      | 0v      |     |     |
#  |  19 |  24 | GPIO.24 |  OUT | 0 | 35 || 36 | 0 | IN   | GPIO.27 | 27  | 16  |
#  |  26 |  25 | GPIO.25 |   IN | 0 | 37 || 38 | 0 | IN   | GPIO.28 | 28  | 20  |
#  |     |     |      0v |      |   | 39 || 40 | 0 | IN   | GPIO.29 | 29  | 21  |
#  +-----+-----+---------+------+---+----++----+---+------+---------+-----+-----+
#  | BCM | wPi |   Name  | Mode | V | Physical | V | Mode | Name    | wPi | BCM |
#  +-----+-----+---------+------+---+---Pi 4B--+---+------+---------+-----+-----+
#
# GPIO17 -> GPIO20 are only available on the RasPi Rev.2. The WPi library tries
#   to keep things consistent between different Pi boards, but you are encouraged
#   to test your settings to make sure.
#
# There is a program "GPIOTest" provided in the install directory that can help
#   you debug your system.
#

GPIO    0           # Relay U1 on PiHat relay board
    Mode=Output
    Logic=Normal
    Boot=Off
    Name="U1"
    Comment="Relay 1"

GPIO    1           # Relay U2 on PiHat relay board
    Mode=Output
    Logic=Normal
    Boot=Off
    Name="U2"
    Comment="Relay 2"

# GPIO    2
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Name="(name)"
#     Comment="(comment)"

GPIO    3           # Relay U3 on PiHat relay board
    Mode=Output
    Boot=Off
    Logic=Normal
    Name="U3"
    Comment="Relay 3"

# GPIO    4
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    5
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    6
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    7
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    8
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    9
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    10
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    11
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    12
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    13
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    14
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    15
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    16
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    17        # only available on the RasPi Rev.2
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    18        # only available on the RasPi Rev.2
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    19        # only available on the RasPi Rev.2
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    20        # only available on the RasPi Rev.2
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    21
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    22
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    23
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    24
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    25
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

GPIO    26      # Button on PiHat relay board
    Mode=Input
    Logic=Invert            # 1 => Off, 0 => On (pressed)
    Pull=High
#     Boot=Off
    Name="Button"
    Comment="PiHat button input"

# GPIO    27
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    28
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    29
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    30
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"

# GPIO    31
#     Mode=Input
#     Logic=Invert
#     Pull=High
#     Boot=Off
#     Name="(name)"
#     Comment="(comment)"
